@using Ireview.Infrastructure.Identity.Models
@using Ireview.Web.Models.Articles
@using Microsoft.AspNetCore.Identity
@inject UserManager<AppUser> UserManager

@model ArticlePageViewModel

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

<div class="row justify-content-between">
    <a onclick="history.back()" style="cursor:pointer" class="col-2"><i class="bi bi-arrow-left "></i>Back</a>
    @if (UserManager.GetUserId(User) == Model.UserId)
    {
        <div class="col-1">
            <button id="btnGroupDrop1" type="button" class="btn btn-primary col btn-sm" style="border-radius:10px" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="bi bi-three-dots-vertical"></i></button>
            <div class="dropdown-menu" aria-labelledby="btnGroupDrop1" style="">
                @Html.ActionLink("Edit","EditArticle","Article",Model, new {Class ="dropdown-item"})
                <a class="dropdown-item" asp-action="DeleteArticle" asp-controller="Article" asp-route-id="@Model.Id"> Delete</a>
            </div>
        </div>
    }
</div>

<div>
    <h1 class="mt-3 bg-primary text-light p-2">@Model.Title</h1>
    <label >@Model.Header</label>
</div>
<hr/>
<div class="row justify-content-center">
    <img src="@Model.ImageSource" style="object-fit:cover; height:600px" />
</div>
<div class="mt-3">
    <p>@Model.Text</p>
</div>
<hr/>
<div class="row">
    @{
        var currentUser = Model.Users.Find(Model.UserId);
    }
    <div>
        <p class="text-end">@Model.Date</p>
    </div>
    <div>
        <img class="" src="@currentUser.ImageSource" width="50" height="50" style="border-radius:30px" />
        <label>@currentUser.UserName</label>
    </div>

</div>
